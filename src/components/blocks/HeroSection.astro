---
import SearchForm from '../SearchForm.jsx';

// Props que recibe el componente
const { data } = Astro.props;

// Extraer los datos del bloque hero
const headline = data?.headline || "Unbeatable rates and exclusive perks at the world's finest hotels";
const description = data?.description || "Yorem ipsum dolor sit amet, consectetur adipiscing elit.";
const image = data?.image;
const layout = data?.layout;
// Construir la URL de la imagen si existe
const backgroundImage = image ? `${import.meta.env.DIRECTUS_URL}/assets/${image}` : null;
---
{layout === 'hero_text_top' && (
  <div class="mx-auto w-full px-8 lg:w-full xl:max-w-7xl 2xl:max-w-7xl py-8">
    <section class="flex flex-col items-center justify-center mb-8">
      <div class="flex flex-col md:flex-row items-center justify-center mb-6">
        <h1 class="text-center md:text-left text-2xl md:text-4xl font-bold leading-tight mb-6 w-full md:w-1/3">{headline}</h1>
        <p class="text-center md:text-left w-full md:w-2/3">{description}</p>
      </div>
      <img src={backgroundImage} alt="Hero background" class="w-full max-h-[759px] object-cover mb-6" />
    </section>
  </div>
)}
{layout === 'hero_text_botton' && (
  <div class="mx-auto w-full px-8 lg:w-full xl:max-w-7xl 2xl:max-w-7xl py-8">
    <section class="flex flex-col items-center justify-center mb-8">
      <img src={backgroundImage} alt="Hero background" class="w-full max-h-[759px] object-cover mb-6" />
      <div class="flex flex-col md:flex-row items-center justify-center">
        <h1 class="text-center md:text-left text-2xl md:text-4xl font-bold leading-tight mb-6 w-full md:w-1/3">{headline}</h1>
        <p class="text-center md:text-left w-full md:w-2/3">{description}</p>
      </div>
    </section>
  </div>
)}
{layout === 'hero_text_center' && (
  <div class="mx-auto w-full px-8 lg:w-full xl:max-w-7xl 2xl:max-w-7xl py-8">
    <section class="flex flex-col items-center justify-center mb-8">
      <div class="relative w-full max-h-[759px] overflow-hidden">
        <img src={backgroundImage} alt="Hero background" class="w-full max-h-[600px] object-cover" />
        <div class="absolute inset-0 bg-black opacity-30"></div>
        <div class="absolute inset-0 flex flex-col items-start justify-start text-white py-8 px-8">
          <h1 class="text-left text-2xl md:text-4xl font-bold leading-tight mb-6 max-w-4xl">{headline}</h1>
          <p class="text-teft text-lg md:text-xl max-w-3xl">{description}</p>
        </div>
      </div>
    </section>
  </div>
)}
{layout === 'main' && (
  <section class={`h-auto min-h-[300px] sm:min-h-[350px] md:h-[650px] md:min-h-[650px] lg:h-[500px] lg:min-h-[500px] py-8 px-2 xs:px-4 relative flex items-center justify-center box-content ${!backgroundImage ? 'bg-gradient-to-br from-indigo-500 to-purple-600' : ''}`}>
    {backgroundImage && (
      <div class="absolute inset-0 z-0">
        <img
          src={backgroundImage} 
          alt="Hero background" 
          class="w-full h-full object-cover"
          loading="eager"
        />
        <!-- Overlay muy sutil solo para mejorar legibilidad del texto -->
        <div class="absolute inset-0 bg-black opacity-25"></div>
      </div>
    )}
    
    <!-- Contenido del hero -->
    <div class="relative z-10 text-left text-white max-w-6xl mx-auto px-2 xs:px-4 w-full">
      <!-- Headline principal -->
      <h1 class="hero-headline font-semibold leading-tight mb-6 break-words overflow-hidden w-full">
        {headline}
      </h1>
      
      <!-- Descripción -->
      <p class="hero-description font-light mb-8 max-w-2xl w-full">
        {description}
      </p>

      <!-- Formulario de búsqueda -->
      <div class="w-full max-w-full z-10">
        <SearchForm client:load />
      </div>
    </div>
  </section>
)}

<style>
  /* Aplicar Roboto Serif al headline - Mobile first */
  .hero-headline {
    font-family: 'Roboto Serif';
    font-style: normal;
    font-stretch: 100%;
    font-variation-settings: 'GRAD' 0, 'opsz' 56;
    font-size: 1.25rem;
    line-height: 1.2;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  /* Aplicar Inter a la descripción - Mobile first */
  .hero-description {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-size: 0.75rem;
  }
  
  /* Pantallas muy pequeñas - 360px y superior */
  @media (min-width: 360px) {
    .hero-headline {
      font-size: 1.5rem;
    }
    
    .hero-description {
      font-size: 0.875rem;
    }
  }
  
  /* Tablet - 640px y superior */
  @media (min-width: 640px) {
    .hero-headline {
      font-size: 1.75rem;
      line-height: 1.15;
    }
    
    .hero-description {
      font-size: 1rem;
    }
  }
  
  /* Desktop - 768px y superior */
  @media (min-width: 768px) {
    .hero-headline {
      font-size: 2.5rem;
      line-height: 1.1;
    }
    
    .hero-description {
      font-size: 1.125rem;
    }
  }
  
  /* Large Desktop - 1024px y superior */
  @media (min-width: 1024px) {
    .hero-headline {
      font-size: 3.5rem;
      line-height: 1.05;
    }
    
    .hero-description {
      font-size: 1.25rem;
    }
  }
  
  /* Extra Large Desktop - 1280px y superior */
  @media (min-width: 1280px) {
    .hero-headline {
      font-size: 4rem;
      line-height: 1.05;
    }
  }
</style>
