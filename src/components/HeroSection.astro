---
import SearchForm from './SearchForm.jsx';

// Props que recibe el componente
const { data } = Astro.props;

// Extraer los datos del bloque hero
const headline = data?.headline || "Unbeatable rates and exclusive perks at the world's finest hotels";
const description = data?.description || "Yorem ipsum dolor sit amet, consectetur adipiscing elit.";
const image = data?.image;
const layout = data?.layout;
// Construir la URL de la imagen si existe
const backgroundImage = image ? `${import.meta.env.DIRECTUS_URL}/assets/${image}` : null;
---

{layout === 'image_center' && (
  <section class="flex flex-col items-center justify-center mb-24">
    <img src={backgroundImage} alt="Hero background" class="w-full max-h-[759px] object-cover mb-6">
    <div class="flex flex-col md:flex-row items-center justify-center">
      <h1 class="text-center md:text-left text-2xl md:text-4xl font-bold leading-tight mb-6 w-full md:w-1/3">{headline}</h1>
      <p class="text-center md:text-left w-full md:w-2/3">{description}</p>
    </div>
  </section>
)}
{layout === 'main' && (
  <section class={`hero-section relative flex items-center justify-center ${!backgroundImage ? 'hero-fallback' : ''}`}>
    {backgroundImage && (
      <div class="absolute inset-0 z-0">
        <img
          src={backgroundImage} 
          alt="Hero background" 
          class="w-full h-full object-cover"
          loading="eager"
        />
        <!-- Overlay muy sutil solo para mejorar legibilidad del texto -->
        <div class="absolute inset-0 bg-black opacity-25"></div>
      </div>
    )}
    
    <!-- Contenido del hero -->
    <div class="relative z-10 text-left text-white px-4 max-w-6xl mx-auto">
      <!-- Headline principal -->
      <h1 class="hero-headline text-4xl font-bold leading-tight mb-6">
        {headline}
      </h1>
      
      <!-- Descripción -->
      <p class="hero-description text-xl font-light mb-8 max-w-2xl">
        {description}
      </p>

      <!-- Formulario de búsqueda -->
      <div class="hero-search-form z-10">
        <SearchForm client:load />
      </div>
    </div>
  </section>
)}

<style>
  .hero-section {
    /* Height fijo para desktop */
    height: 500px;
  }
  
  /* Fallback gradient solo cuando no hay imagen */
  .hero-fallback {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  /* Aplicar Roboto Serif al headline */
  .hero-headline {
    font-family: 'Roboto Serif';
    font-weight: 600;
    line-height: 120%;
    font-style: normal;
    font-size: 56px;
    font-stretch: 100%;
    font-variation-settings: 'GRAD' 0, 'opsz' 56;
  }
  
  /* Aplicar Inter a la descripción */
  .hero-description {
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    font-weight: 300;
  }
  
  /* Estilos para el formulario de búsqueda en el hero */
  .hero-search-form {
    max-width: 100%;
    width: 100%;
  }
  
  /* Responsive height y typography */
  @media (max-width: 768px) {
    .hero-section {
      height: 400px; /* Reducido para móvil */
    }
    
    .hero-headline {
      font-size: 2.5rem;
      line-height: 1.2;
    }
    
    .hero-description {
      font-size: 1.125rem;
    }
  }
  
  @media (max-width: 480px) {
    .hero-section {
      height: 350px; /* Aún más reducido para móviles pequeños */
    }
    
    .hero-headline {
      font-size: 2rem;
    }
    
    .hero-description {
      font-size: 1rem;
    }
  }
</style>
